<!DOCTYPE html>
<html class="scroll-smooth" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Mario CGPA Tracker - Portfolio Section</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Press+Start+2P&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#2563eb",
                        "background-light": "#ffffff",
                        "background-dark": "#0f172a",
                        "mario-sky": "#5c94fc",
                        "mario-sky-dark": "#1a1a2e",
                        "mario-ground": "#d45b12",
                        "mario-ground-dark": "#005c9e",
                        "mario-block": "#fb923c",
                        "mario-block-shadow": "#b45309",
                    },
                    fontFamily: {
                        display: ["'Press Start 2P'", "cursive"],
                        body: ["Inter", "sans-serif"],
                    },
                    boxShadow: {
                        'pixel': 'inset 4px 4px 0px 0px rgba(255,255,255,0.4), inset -4px -4px 0px 0px rgba(0,0,0,0.2)',
                        'pixel-pressed': 'inset 4px 4px 0px 0px rgba(0,0,0,0.2), inset -4px -4px 0px 0px rgba(255,255,255,0.4)',
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                    },
                },
            },
        };
    </script>
    <style>
        * {
            image-rendering: pixelated;
        }
        
        .pixel-text {
            text-shadow: 2px 2px 0px #000000;
        }
        
        .bg-mario-brick {
            background-color: #d45b12;
            background-image: 
                linear-gradient(45deg, #b45309 25%, transparent 25%, transparent 75%, #b45309 75%, #b45309),
                linear-gradient(45deg, #b45309 25%, transparent 25%, transparent 75%, #b45309 75%, #b45309);
            background-position: 0 0, 16px 16px;
            background-size: 32px 32px;
        }
        
        .dark .bg-mario-brick {
            background-color: #005c9e;
            background-image: 
                linear-gradient(45deg, #004275 25%, transparent 25%, transparent 75%, #004275 75%, #004275),
                linear-gradient(45deg, #004275 25%, transparent 25%, transparent 75%, #004275 75%, #004275);
        }
        
        @keyframes drift {
            from { transform: translateX(-100%); }
            to { transform: translateX(100vw); }
        }
        
        .cloud-animate {
            animation: drift 60s linear infinite;
        }
        
        @keyframes blockHit {
            0%, 100% { transform: translateY(0); }
            25% { transform: translateY(-8px); }
            50% { transform: translateY(-4px); }
            75% { transform: translateY(-2px); }
        }
        
        @keyframes sgpaReveal {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 0;
            }
            50% { 
                transform: translateY(-60px) scale(1.3);
                opacity: 1;
            }
            100% { 
                transform: translateY(-40px) scale(1);
                opacity: 1;
            }
        }
        
        @keyframes marioJump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-100px); }
        }
        
        @keyframes flagSlide {
            0% { transform: translateY(0); }
            100% { transform: translateY(200px); }
        }
        
        @keyframes particleBurst {
            0% { 
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }
        
        .block-hit {
            animation: blockHit 0.3s ease-out;
        }
        
        .sgpa-reveal {
            animation: sgpaReveal 0.6s ease-out forwards;
        }
        
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fb923c;
            border: 2px solid #000;
            animation: particleBurst 0.6s ease-out forwards;
        }
        
        .mario-sprite {
            width: 64px;
            height: 64px;
            position: absolute;
            bottom: 64px;
            transition: left 0.3s linear;
        }
        
        .mario-walking {
            animation: walk 0.3s steps(2) infinite;
        }
        
        @keyframes walk {
            0% { background-position: 0 0; }
            100% { background-position: -128px 0; }
        }
        
        .play-button {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 1000;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: 4px solid #000;
            padding: 12px 24px;
            cursor: pointer;
            box-shadow: 4px 4px 0 #000;
            transition: all 0.1s;
        }
        
        .play-button:hover {
            transform: translateY(-2px);
            box-shadow: 6px 6px 0 #000;
        }
        
        .play-button:active {
            transform: translateY(0);
            box-shadow: 2px 2px 0 #000;
        }
        
        .play-button.active {
            background: linear-gradient(135deg, #90EE90, #32CD32);
        }
        
        .controls-hint {
            position: fixed;
            top: 170px;
            right: 30px;
            z-index: 999;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            line-height: 1.8;
            display: none;
            border: 2px solid #fff;
        }
        
        .controls-hint.show {
            display: block;
        }
        
        .brick-container {
            position: relative;
        }
        
        .brick-sgpa {
            position: absolute;
            top: -50px;
            left: 0;
            right: 0;
            margin: 0 auto;
            opacity: 0;
            pointer-events: none;
            white-space: nowrap;
            width: 100%;
            text-align: center;
        }
        
        .brick-sgpa.revealed {
            opacity: 1 !important;
        }
        
        .cgpa-display {
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        
        .cgpa-display.revealed {
            opacity: 1;
        }
        
        .flag-pole-top {
            transition: transform 0.8s ease-out;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-body antialiased transition-colors duration-300 overflow-hidden">

    <!-- Play Button -->
    <button id="playButton" class="play-button" onclick="togglePlayMode()">
        <span class="font-display text-xs pixel-text" id="playButtonText">‚ñ∂ PLAY</span>
    </button>
    
    <!-- Controls Hint -->
    <div id="controlsHint" class="controls-hint">
        ‚Üê ‚Üí MOVE<br>
        ‚Üë JUMP
    </div>

    <!-- Mario Game Section -->
    <section class="w-full h-screen bg-mario-sky dark:bg-mario-sky-dark overflow-hidden relative flex flex-col justify-end transition-colors duration-500">
        
        <!-- Title -->
        <div class="absolute top-24 left-0 right-0 z-20 text-center pointer-events-none">
            <h2 class="font-display text-white text-xl md:text-3xl pixel-text tracking-widest uppercase mb-2 drop-shadow-lg">Academic Journey</h2>
            <p class="font-display text-white/80 text-xs md:text-sm pixel-text drop-shadow-md">Level 1-1: GPA Tracker</p>
        </div>
        
        <!-- Clouds -->
        <div class="absolute inset-0 z-0 opacity-80 dark:opacity-20 pointer-events-none">
            <div class="absolute top-20 left-10 cloud-animate" style="animation-duration: 45s;">
                <svg fill="white" height="32" viewBox="0 0 64 32" width="64">
                    <path d="M16 16 h32 v16 h-32 z M8 16 h8 v8 h-8 z M48 16 h8 v8 h-8 z M16 8 h32 v8 h-32 z"></path>
                </svg>
            </div>
            <div class="absolute top-40 left-1/2 cloud-animate" style="animation-duration: 65s; animation-delay: -20s;">
                <svg fill="white" height="48" viewBox="0 0 96 48" width="96">
                    <path d="M24 24 h48 v24 h-48 z M12 24 h12 v12 h-12 z M72 24 h12 v12 h-12 z M24 12 h48 v12 h-48 z"></path>
                </svg>
            </div>
            <div class="absolute top-60 right-20 cloud-animate" style="animation-duration: 55s; animation-delay: -5s;">
                <svg fill="white" height="32" viewBox="0 0 64 32" width="64">
                    <path d="M16 16 h32 v16 h-32 z M8 16 h8 v8 h-8 z M48 16 h8 v8 h-8 z M16 8 h32 v8 h-32 z"></path>
                </svg>
            </div>
        </div>
        
        <!-- Game Container -->
        <div id="gameContainer" class="w-full h-full relative z-10">
            <div class="absolute bottom-16 left-0 right-0 flex items-end justify-start px-8" style="height: 400px;">
                
                <!-- Mario Character -->
                <div id="mario" class="absolute bottom-24 transition-all duration-300" style="left: 50px; width: 64px; height: 64px;">
                    <img src="{{ url_for('static', filename='images/mario.png') }}" 
                         alt="Mario" class="w-full h-full object-contain drop-shadow-lg"/>
                </div>
                
                <!-- Bricks Container -->
                <div id="bricksContainer" class="flex items-end gap-12 absolute" style="left: 200px; bottom: 100px;">
                    {% for sem in semesters %}
                    <div class="brick-container flex flex-col items-center relative" data-semester="{{ sem.semester }}" data-sgpa="{{ sem.sgpa }}">
                        <!-- Semester Label -->
                        <span class="font-display text-xs text-white pixel-text mb-2 bg-black/40 px-2 py-1 rounded">Sem {{ sem.semester }}</span>
                        
                        <!-- SGPA Display (hidden initially) -->
                        <div class="brick-sgpa font-display text-[#fb923c] text-lg pixel-text">
                            {{ sem.sgpa }}
                        </div>
                        
                        <!-- Question Block -->
                        <div class="brick w-16 h-16 bg-mario-block border-4 border-black shadow-pixel flex items-center justify-center relative">
                            <span class="font-display text-4xl text-white pixel-text mt-2">?</span>
                            <div class="absolute top-1 left-1 w-1 h-1 bg-[#fbbf24]"></div>
                            <div class="absolute top-1 right-1 w-1 h-1 bg-[#fbbf24]"></div>
                            <div class="absolute bottom-1 left-1 w-1 h-1 bg-[#fbbf24]"></div>
                            <div class="absolute bottom-1 right-1 w-1 h-1 bg-[#fbbf24]"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Flag Pole (CGPA) -->
                <div id="flagPole" class="absolute flex flex-col items-center" style="left: calc(200px + {{ semesters|length * 112 }}px + 300px); bottom: 24px;">
                    <!-- CGPA Display -->
                    <div class="cgpa-display absolute top-[-80px] whitespace-nowrap flex flex-col items-center">
                        <div class="font-display text-white text-3xl md:text-5xl pixel-text" style="text-shadow: 4px 4px 0 #000;">{{ cgpa }}</div>
                        <div class="font-display text-white text-xs md:text-sm pixel-text bg-black/50 px-3 py-1 mt-2 rounded-full border border-white/20">Overall CGPA</div>
                    </div>
                    
                    <!-- Flag -->
                    <div class="relative flex flex-col items-center">
                        <div class="flag-pole-top w-4 h-4 bg-green-500 border-2 border-black rounded-full z-20"></div>
                        <div class="absolute top-4 left-1/2 w-16 h-16 z-10 origin-left">
                            <svg class="w-full h-full drop-shadow-md" viewBox="0 0 100 100">
                                <path d="M0,0 L80,30 L0,60 Z" fill="white" stroke="black" stroke-width="3"></path>
                            </svg>
                        </div>
                        <div class="w-2 h-80 bg-green-600 border-x-2 border-black z-10 shadow-lg"></div>
                        <div class="w-10 h-10 bg-[#7c7c7c] border-2 border-black z-20 shadow-pixel relative">
                            <div class="absolute inset-1 border border-white/20"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ground -->
        <div class="absolute bottom-0 left-0 right-0 h-24 bg-mario-brick z-20 border-t-4 border-black w-full"></div>
    </section>

    <script>
        // Game state
        let gameState = {
            mode: 'auto', // 'auto' or 'manual'
            currentBrick: 0,
            marioX: 50,
            marioY: 0,
            velocityY: 0,
            isJumping: false,
            isMovingRight: false,
            isMovingLeft: false,
            facing: 'right',
            autoPlayComplete: false,
            flagReached: false,
            bricksHit: new Set(),
            totalBricks: {{ semesters|length }}
        };
        
        const GRAVITY = 0.8;
        const JUMP_POWER = -27;
        const MOVE_SPEED = 5;
        const BRICK_START_X = 200;
        const BRICK_SPACING = 112; // 64px brick + 48px gap
        const BRICK_Y = 100;
        const MARIO_WIDTH = 64;
        const MARIO_HEIGHT = 64;
        
        // Get DOM elements
        const mario = document.getElementById('mario');
        const bricksContainer = document.getElementById('bricksContainer');
        const playButton = document.getElementById('playButton');
        const playButtonText = document.getElementById('playButtonText');
        const controlsHint = document.getElementById('controlsHint');
        
        // Keyboard controls
        const keys = {};
        
        window.addEventListener('keydown', (e) => {
            if (gameState.mode !== 'manual') return;
            keys[e.key] = true;
            
            if ((e.key === ' ' || e.key === 'ArrowUp') && !gameState.isJumping) {
                jump();
            }
            if (e.key === 'ArrowRight') {
                gameState.isMovingRight = true;
                gameState.facing = 'right';
                mario.style.transform = 'scaleX(1)';
            }
            if (e.key === 'ArrowLeft') {
                gameState.isMovingLeft = true;
                gameState.facing = 'left';
                mario.style.transform = 'scaleX(-1)';
            }
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
            if (e.key === 'ArrowRight') gameState.isMovingRight = false;
            if (e.key === 'ArrowLeft') gameState.isMovingLeft = false;
        });
        
        function togglePlayMode() {
            if (gameState.mode === 'auto') {
                // Switch to manual mode
                gameState.mode = 'manual';
                playButtonText.textContent = '‚óº AUTO';
                playButton.classList.add('active');
                controlsHint.classList.add('show');
                
                // Reset if auto was complete
                if (gameState.autoPlayComplete) {
                    resetGame();
                }
            } else {
                // Switch to auto mode
                gameState.mode = 'auto';
                playButtonText.textContent = '‚ñ∂ PLAY';
                playButton.classList.remove('active');
                controlsHint.classList.remove('show');
                resetGame();
                startAutoPlay();
            }
        }
        
        function jump() {
            if (gameState.isJumping) return;
            gameState.isJumping = true;
            gameState.velocityY = JUMP_POWER;
            console.log('Mario jumping from Y:', gameState.marioY, 'with velocity:', gameState.velocityY);
            playJumpSound();
        }
        
        function createParticles(x, y) {
            const particles = [];
            for (let i = 0; i < 6; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.bottom = y + 'px';
                
                const angle = (Math.PI / 3) * i;
                const distance = 30 + Math.random() * 20;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                
                document.getElementById('gameContainer').appendChild(particle);
                particles.push(particle);
                
                setTimeout(() => particle.remove(), 600);
            }
        }
        
        function hitBrick(brickIndex) {
            if (gameState.bricksHit.has(brickIndex)) return;
            
            gameState.bricksHit.add(brickIndex);
            const bricks = document.querySelectorAll('.brick-container');
            const brick = bricks[brickIndex];
            
            if (!brick) return;
            
            // Animate brick
            const brickElement = brick.querySelector('.brick');
            brickElement.classList.add('block-hit');
            setTimeout(() => {
                brickElement.classList.remove('block-hit');
                // Dim the brick to grey and hide the ? mark
                brickElement.style.backgroundColor = '#808080';
                brickElement.style.backgroundImage = 'none';
                const questionMark = brickElement.querySelector('span');
                if (questionMark) {
                    questionMark.style.display = 'none';
                }
            }, 300);
            
            // Reveal SGPA
            const sgpaElement = brick.querySelector('.brick-sgpa');
            sgpaElement.classList.add('sgpa-reveal', 'revealed');
            
            // Create particles
            const brickRect = brick.getBoundingClientRect();
            const containerRect = document.getElementById('gameContainer').getBoundingClientRect();
            createParticles(
                brickRect.left - containerRect.left + 32,
                containerRect.bottom - brickRect.bottom + 16
            );
            
            // Play sound
            playHitSound();
        }
        
        function reachFlag() {
            gameState.flagReached = true;
            
            // Show CGPA
            const cgpaDisplay = document.querySelector('.cgpa-display');
            cgpaDisplay.classList.add('revealed');
            
            // Animate flag down
            const flagTop = document.querySelector('.flag-pole-top');
            flagTop.style.transform = 'translateY(280px)';
            
            // Play victory sound
            playVictorySound();
            
            if (gameState.mode === 'auto') {
                gameState.autoPlayComplete = true;
            }
        }
        
        function checkFlagCollision() {
            if (gameState.flagReached) return;
            
            const flagX = BRICK_START_X + (gameState.totalBricks * BRICK_SPACING) + 300;
            const marioBottom = 24 + gameState.marioY;
            const marioTop = 24 + gameState.marioY + MARIO_HEIGHT;
            const marioRight = gameState.marioX + MARIO_WIDTH;
            const marioLeft = gameState.marioX;
            
            // Check if Mario touches the flag pole (vertical pole area)
            // More lenient for manual mode
            const horizontalRange = gameState.mode === 'manual' ? 30 : 10;
            const minHeight = gameState.mode === 'manual' ? 80 : 100;
            
            if (marioRight > flagX - horizontalRange && 
                marioLeft < flagX + horizontalRange &&
                marioTop >= minHeight &&
                gameState.velocityY < 0) {
                console.log('Flag pole touched! Mode:', gameState.mode);
                reachFlag();
            }
        }
        
        function checkBrickCollisions() {
            const bricks = document.querySelectorAll('.brick-container');
            const marioBottom = 24 + gameState.marioY;
            const marioTop = 24 + gameState.marioY + MARIO_HEIGHT;
            const marioLeft = gameState.marioX;
            const marioRight = gameState.marioX + MARIO_WIDTH;
            
            bricks.forEach((brick, index) => {
                if (gameState.bricksHit.has(index)) return;
                
                const brickX = BRICK_START_X + (index * BRICK_SPACING);
                const brickY = BRICK_Y;
                const brickBottom = brickY;
                const brickTop = brickY + 64;
                const brickLeft = brickX;
                const brickRight = brickX + 64;
                
                // More relaxed collision for manual mode, stricter for auto
                const horizontalThreshold = gameState.mode === 'manual' ? 15 : 25;
                const verticalRange = gameState.mode === 'manual' ? 8 : 5;
                
                // Check if Mario is hitting brick from below
                if (marioRight > brickLeft + horizontalThreshold && 
                    marioLeft < brickRight - horizontalThreshold &&
                    marioTop >= brickBottom - 2 &&
                    marioTop <= brickBottom + verticalRange &&
                    gameState.velocityY < 0) {
                    console.log('Brick hit! Mode:', gameState.mode, 'Index:', index, 'MarioTop:', marioTop, 'BrickBottom:', brickBottom);
                    hitBrick(index);
                }
            });
        }
        
        function updatePhysics() {
            // Apply gravity
            gameState.velocityY += GRAVITY;
            gameState.marioY -= gameState.velocityY;
            
            // Ground collision
            if (gameState.marioY <= 0) {
                gameState.marioY = 0;
                gameState.velocityY = 0;
                gameState.isJumping = false;
            }
            
            // Manual movement
            if (gameState.mode === 'manual') {
                if (gameState.isMovingRight) {
                    gameState.marioX += MOVE_SPEED;
                }
                if (gameState.isMovingLeft) {
                    gameState.marioX -= MOVE_SPEED;
                }
                
                // Keep Mario in bounds
                gameState.marioX = Math.max(0, Math.min(gameState.marioX, window.innerWidth - MARIO_WIDTH));
            }
            
            // Check brick collisions
            checkBrickCollisions();
            
            // Check flag pole collision
            checkFlagCollision();
            
            // Update Mario position
            mario.style.left = gameState.marioX + 'px';
            mario.style.bottom = (24 + gameState.marioY) + 'px';
        }
        
        // Auto-play sequence
        async function startAutoPlay() {
            gameState.autoPlayComplete = false;
            await sleep(1000);
            
            const bricks = document.querySelectorAll('.brick-container');
            
            // Walk and hit each brick
            for (let i = 0; i < bricks.length; i++) {
                if (gameState.mode !== 'auto') break;
                
                // Get actual brick position from DOM
                const brickElement = bricks[i];
                const brickRect = brickElement.getBoundingClientRect();
                const gameContainerRect = document.getElementById('gameContainer').getBoundingClientRect();
                
                // Calculate brick center position relative to game container
                const brickCenterX = brickRect.left - gameContainerRect.left + brickRect.width / 2;
                const targetX = brickCenterX - (MARIO_WIDTH / 2);
                
                await moveMarioTo(targetX);
                await sleep(200);
                await jumpAndHit(i);
                await sleep(500);
            }
            
            // Move to flag
            if (gameState.mode === 'auto') {
                const flagX = BRICK_START_X + (bricks.length * BRICK_SPACING) + 300;
                await moveMarioTo(flagX);
                await sleep(200);
                // Jump to touch the flag pole
                jump();
                await sleep(400);
                reachFlag();
            }
        }
        
        async function moveMarioTo(targetX) {
            return new Promise((resolve) => {
                const startX = gameState.marioX;
                const distance = targetX - startX;
                const duration = Math.abs(distance) * 2; // slower walking
                let elapsed = 0;
                
                if (distance > 0) {
                    mario.style.transform = 'scaleX(1)';
                } else {
                    mario.style.transform = 'scaleX(-1)';
                }
                
                const interval = setInterval(() => {
                    elapsed += 16;
                    const progress = Math.min(elapsed / duration, 1);
                    gameState.marioX = startX + (distance * progress);
                    mario.style.left = gameState.marioX + 'px';
                    
                    if (progress >= 1) {
                        clearInterval(interval);
                        resolve();
                    }
                }, 16);
            });
        }
        
        async function jumpAndHit(brickIndex) {
            return new Promise((resolve) => {
                jump();
                setTimeout(() => {
                    hitBrick(brickIndex);
                    resolve();
                }, 300);
            });
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        function resetGame() {
            // Reset state
            gameState.currentBrick = 0;
            gameState.marioX = 50;
            gameState.marioY = 0;
            gameState.velocityY = 0;
            gameState.isJumping = false;
            gameState.autoPlayComplete = false;
            gameState.flagReached = false;
            gameState.bricksHit.clear();
            
            // Reset visuals
            mario.style.left = '50px';
            mario.style.bottom = '24px';
            mario.style.transform = 'scaleX(1)';
            
            document.querySelectorAll('.brick-sgpa').forEach(el => {
                el.classList.remove('sgpa-reveal', 'revealed');
            });
            
            document.querySelectorAll('.brick').forEach(brick => {
                brick.style.backgroundColor = '';
                brick.style.backgroundImage = '';
                const questionMark = brick.querySelector('span');
                if (questionMark) {
                    questionMark.style.display = '';
                }
            });
            
            document.querySelector('.cgpa-display').classList.remove('revealed');
            document.querySelector('.flag-pole-top').style.transform = 'translateY(0)';
        }
        
        // Sound effects (placeholder - you can add real sound files)
        function playJumpSound() {
            // Add jump sound here
            console.log('üéµ Jump!');
        }
        
        function playHitSound() {
            // Add hit sound here
            console.log('üéµ Brick hit!');
        }
        
        function playVictorySound() {
            // Add victory sound here
            console.log('üéµ Victory!');
        }
        
        // Game loop
        function gameLoop() {
            updatePhysics();
            requestAnimationFrame(gameLoop);
        }
        
        // Start game on load
        window.addEventListener('load', () => {
            gameLoop();
            startAutoPlay();
        });
    </script>
</body>
</html>
